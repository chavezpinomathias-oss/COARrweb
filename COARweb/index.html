<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COARweb PRO - Herramientas para Estudiantes COAR</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="assets/icons/icon-192.png">
    <link rel="icon" href="assets/icons/icon-192.png">
    <meta name="theme-color" content="#096085">
</head>
<body>
    <header>
        <div class="header-content">
            <h1>ğŸ›¡ï¸ COARweb PRO</h1>
            <p>Tu toolkit oficial para alto rendimiento</p>
        </div>
        <nav class="nav-bar">
            <button onclick="showSection('dashboard')" class="nav-btn active">ğŸ“Š Dashboard</button>
            <button onclick="showSection('tasks')" class="nav-btn">ğŸ“ Tareas</button>
            <button onclick="showSection('calendar')" class="nav-btn">ğŸ“… Calendario</button>
            <button onclick="showSection('pomodoro')" class="nav-btn">â±ï¸ Pomodoro</button>
            <button onclick="showSection('resources')" class="nav-btn">ğŸ“ Recursos</button>
            <button onclick="toggleZenMode()" id="zen-btn" class="nav-btn">ğŸ§˜ Zen Mode</button>
            <button onclick="toggleDarkMode()" id="dark-toggle" class="nav-btn">ğŸŒ™ Oscuro</button>
        </nav>
    </header>

    <!-- Dashboard -->
    <section id="dashboard" class="section active">
        <h2>Resumen Diario - <span id="dashboard-date"></span></h2>
        <div class="dashboard-grid">
            <div class="card stats-card">
                <h3>ğŸš€ Productividad Hoy</h3>
                <div class="progress-circle" id="daily-progress-circle">
                    <svg viewBox="0 0 100 100">
                        <path class="circle-bg" d="M50 5 A45 45 0 0 1 95 50 A45 45 0 0 1 5 50 A45 45 0 0 1 50 5" fill="none" stroke="#e0e0e0" stroke-width="5"></path>
                        <path id="daily-progress-path" d="M50 5 A45 45 0 0 1 95 50 A45 45 0 0 1 5 50 A45 45 0 0 1 50 5" fill="none" stroke="#A9A077" stroke-width="5" stroke-dasharray="0 283"></path>
                    </svg>
                    <div class="progress-text">
                        <span id="daily-hours">0h</span><br>
                        <small>de <span id="daily-goal-text">1.5h</span></small>
                    </div>
                </div>
                <p>Racha: <strong id="streak-count">0</strong> dÃ­as ğŸ”¥</p>
            </div>
            <div class="card stats-card">
                <h3>ğŸ“ˆ Semana Actual</h3>
                <div id="weekly-chart" class="weekly-bar"></div>
                <p>Total: <span id="weekly-total">0h</span></p>
            </div>
            <div class="card stats-card">
                <h3>ğŸ“‹ Tareas & Eventos</h3>
                <p>Pendientes: <span id="pending-tasks-dash">0</span></p>
                <p>Eventos hoy: <span id="today-events-dash">0</span></p>
                <p>Completadas: <span id="completed-tasks-dash">0</span></p>
            </div>
            <div class="card action-card">
                <h3>Acciones RÃ¡pidas</h3>
                <button onclick="addQuickTask()">+ Tarea RÃ¡pida</button>
                <button onclick="startPomodoroQuick()">â–¶ Pomodoro RÃ¡pido</button>
                <button onclick="exportData()">ğŸ’¾ Exportar Datos</button>
                <input type="file" id="import-file" accept=".json" style="display:none" onchange="importData(event)">
                <button onclick="document.getElementById('import-file').click()">ğŸ“ Importar</button>
            </div>
        </div>
    </section>

    <!-- Tareas (con Drag & Drop) -->
    <section id="tasks" class="section">
        <h2>Organizador de Tareas Avanzado</h2>
        <div class="task-form">
            <input type="text" id="task-title" placeholder="TÃ­tulo de la tarea...">
            <input type="date" id="task-due">
            <select id="task-priority">
                <option value="Alta">Alta â­â­â­</option>
                <option value="Media">Media â­â­</option>
                <option value="Baja">Baja â­</option>
            </select>
            <select id="task-category">
                <option value="Estudio">Estudio ğŸ“š</option>
                <option value="Personal">Personal ğŸ </option>
                <option value="Trabajo">Trabajo ğŸ’¼</option>
                <option value="Otros">Otros â“</option>
            </select>
            <button onclick="addTask()">+ Crear</button>
        </div>
        <div class="filters">
            <select id="filter-status" onchange="renderTasks()"><option value="all">Estado</option><option value="pending">Pendientes</option><option value="completed">Completadas</option></select>
            <select id="filter-priority" onchange="renderTasks()"><option value="all">Prioridad</option><option value="Alta">Alta</option><option value="Media">Media</option><option value="Baja">Baja</option></select>
            <select id="filter-category" onchange="renderTasks()"><option value="all">CategorÃ­a</option><option value="Estudio">Estudio</option><option value="Personal">Personal</option><option value="Trabajo">Trabajo</option><option value="Otros">Otros</option></select>
        </div>
        <div class="task-boards">
            <div class="board" id="pending-board" ondrop="drop(event)" ondragover="allowDrop(event)">
                <h3>ğŸ“¥ Pendientes</h3>
                <div class="task-list" id="pending-list"></div>
            </div>
            <div class="board" id="in-progress-board" ondrop="drop(event)" ondragover="allowDrop(event)">
                <h3>âš¡ En Curso</h3>
                <div class="task-list" id="in-progress-list"></div>
            </div>
            <div class="board" id="completed-board" ondrop="drop(event)" ondragover="allowDrop(event)">
                <h3>âœ… Completadas</h3>
                <div class="task-list" id="completed-list"></div>
            </div>
        </div>
        <div class="stats">Total: <span id="total-tasks">0</span> | Completadas: <span id="completed-tasks">0</span> | Pendientes: <span id="pending-tasks">0</span></div>
    </section>

    <!-- Calendario -->
    <section id="calendar" class="section">
        <h2>Calendario Interactivo</h2>
        <div class="calendar-header">
            <button onclick="prevMonth()">â—€ Mes Anterior</button>
            <h3 id="current-month-year"></h3>
            <button onclick="nextMonth()">Siguiente Mes â–¶</button>
        </div>
        <div id="calendar-days" class="calendar-grid"></div>
        <div class="day-details">
            <h3 id="selected-day-title">Selecciona un dÃ­a</h3>
            <div class="event-form">
                <input type="time" id="event-time" value="08:00">
                <input type="text" id="event-title" placeholder="TÃ­tulo del evento">
                <textarea id="event-desc" placeholder="DescripciÃ³n..."></textarea>
                <button onclick="addEvent()">+ Agregar Evento</button>
            </div>
            <div id="event-list-day" class="event-list"></div>
        </div>
    </section>

    <!-- Pomodoro -->
    <section id="pomodoro" class="section">
        <h2>Pomodoro Avanzado con Rachas</h2>
        <div class="config-panel">
            <label>Trabajo: <input type="number" id="work-duration" value="25" min="1"> min</label>
            <label>Descanso: <input type="number" id="break-duration" value="5" min="1"> min</label>
            <label>Objetivo Diario: <input type="number" id="daily-goal" value="1.5" step="0.5" min="0.5"> h</label>
            <button onclick="savePomodoroConfig()">ğŸ’¾ Guardar</button>
        </div>
        <div class="timer-container">
            <div id="timer-display" class="timer">25:00</div>
            <div class="timer-controls">
                <button onclick="startTimer()" id="start-btn">â–¶ Iniciar Trabajo</button>
                <button onclick="pauseTimer()" id="pause-btn" disabled>â¸ Pausar</button>
                <button onclick="resetTimer()">â†º Reset</button>
            </div>
            <audio id="work-end-sound" src="assets/sounds/campana.mp3" preload="auto"></audio>
            <audio id="break-end-sound" src="assets/sounds/tic-tac.mp3" preload="auto"></audio>
        </div>
        <div class="progress-section">
            <h3>Progreso Diario</h3>
            <div class="progress-circle" id="pomodoro-progress-circle">
                <!-- Similar al del dashboard -->
                <svg viewBox="0 0 100 100">
                    <path class="circle-bg" d="M50 5 A45 45 0 0 1 95 50 A45 45 0 0 1 5 50 A45 45 0 0 1 50 5" fill="none" stroke="#e0e0e0" stroke-width="5"></path>
                    <path id="pomodoro-progress-path" d="M50 5 A45 45 0 0 1 95 50 A45 45 0 0 1 5 50 A45 45 0 0 1 50 5" fill="none" stroke="#A9A077" stroke-width="5" stroke-dasharray="0 283"></path>
                </svg>
                <div class="progress-text">
                    <span id="pomodoro-hours">0h</span><br>
                    <small>de <span id="pomodoro-goal-text">1.5h</span></small>
                </div>
            </div>
            <p>Racha: <strong id="pomodoro-streak">0</strong> dÃ­as</p>
        </div>
    </section>

    <!-- Recursos (Sugerencias + Horario COAR) -->
    <section id="resources" class="section">
        <h2>Recursos y Sugerencias</h2>
        <div class="resources-tabs">
            <button onclick="showResourceTab('videos')" class="tab-btn active">ğŸ¥ Videos Motivacionales</button>
            <button onclick="showResourceTab('tips')" class="tab-btn">ğŸ’¡ Tips & Comentarios</button>
            <button onclick="showResourceTab('schedule')" class="tab-btn">ğŸ“š Horario COAR</button>
        </div>
        <div id="videos-tab" class="tab-content active">
            <div class="add-resource">
                <input type="url" id="video-url" placeholder="URL de YouTube (embed)">
                <button onclick="addVideo()">+ Agregar</button>
            </div>
            <div id="videos-list"></div>
        </div>
        <div id="tips-tab" class="tab-content">
            <textarea id="tip-text" placeholder="Escribe un tip o comentario..."></textarea>
            <button onclick="addTip()">+ Publicar</button>
            <div id="tips-list"></div>
        </div>
        <div id="schedule-tab" class="tab-content">
            <h3>Horario COAR Pre-cargado (Editable)</h3>
            <p>Basado en el modelo oficial del MINEDU para COAR (ajusta segÃºn tu sede).</p>
            <div id="coar-schedule" class="schedule-table"></div>
            <button onclick="editSchedule()">âœï¸ Editar Horario</button>
        </div>
    </section>

    <!-- Modo Zen Overlay -->
    <div id="zen-overlay" class="zen-mode hidden">
        <div class="zen-content">
            <h2>ğŸ§˜ Modo Zen - Foco Total</h2>
            <div id="zen-timer" class="zen-timer">25:00</div>
            <button onclick="exitZenMode()">Salir Zen</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>